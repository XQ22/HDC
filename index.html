<!DOCTYPE html>
<html>
<head>
<title>Hotstopper Distribution Centre</title>
<style>
body {
  background-color: #252630;
  color: #acaeb2;
}
  
h1, h2 {
  font-family: Arial, Helvetica Neue, monospace;
}

h1 {
  font-size: 70px;
}
p {
  font-family: Helvetica, Arial, monospace;
}
  
table {
  border: 0px;
}

button {
  border: none;
  -webkit-transition-duration: 0.5s;
  transition-duration: 0.5s;
}

button:hover {
  color: #ccced2;
}
 
</style>
<script>
  var timePlaying = 0;
  var timeEvent = true;
  var display = {};
  var totalFunds = 0;
  var HScount = 0;
  var HSstock = 0;
  var HSingress = 1;
  var HSingressAuto = 0;
  var HSegress = 1;
  var HSegressAuto = 0;
  var HSdemand = 50;
  var HSprice = 50;
  var Rfunds = 0;
  var Projects
  function upupdowndownleftrightleftrightba(quantity,password){
    if(password === "swordfish"){
      HScount = quantity;
    } else {
      console.log("Cheating detected in recent Centre Audit. Centre will be shut down.");
    }
  };
  function StartTime(){
    timePlaying++;
    if(timePlaying % 2 === 0){
      timeEvent = true;
    } else {
      timeEvent = false;
    }
    if(timeEvent){
      if(HSstock>HSegressAuto){HSstock += HSingressAuto - HSegressAuto;}
      if(Math.floor(Math.random() * 101) > (100-HSdemand)&&HSstock>HSEgress){
        HSstock -= HSegress;
        totalFunds += HSprice;
      }
    }
    if(totalFunds > 100){
      document.getElementById("UL0").style.visibility = "visible";
      if(totalFunds > 1000){
        document.getElementById("UL1").style.visibility = "visible";
        if(totalFunds > 20000){
          document.getElementById("UL2").style.visibility = "visible";
          if(totalFunds > 25000){
            document.getElementById("UL3").style.visibility = "visible";
          }
        }
      }
    }
    var t = setTimeout(StartTime, 50);
    display.HSCount.innerHTML = HScount;
    display.Funds.innerHTML = totalFunds/100 + "." + totalFunds%100;
    display.Demand.innerHTML = HSdemand;
    display.Price.innerHTML = HSprice;
    display.Stock.innerHTML = HSstock;
    display.ResearchFunds.innerHTML = Rfunds;
  };
  function HSincome(){
    HScount += HSingress;
    HSstock += HSingress;
  };
  function HSdelivery(){
    HSstock -= HSingress;
  };
  function HSreprice(up){
    if(up){
      HSprice++;
    } else {
      if(HSprice>1){HSprice--;}
    }
    HSdemand = 100/price;
  }
  function Employ(type){
    switch(type){
      case "telephonist":
        if(totalFunds>10){
          HSingressAuto++;
          totalFunds -= 10;
        }
      break;
      case "salesman":
        if(totalFunds>20){
          HSegressAuto++;
          totalFunds -= 20;
        }
      break;
    }
  };
  function initialise(){
    display.HSCount = document.getElementById("HScreated");
    display.Funds = document.getElementById("Funds");
    display.Demand = document.getElementById("Demand");
    display.Price = document.getElementById("HSprice");
    display.Stock = document.getElementById("HSstock");
    display.ResearchFunds = document.getElementById("RFunds");
    document.getElementById("init").style.visibility = "hidden";
    for(var i = 0;i<4;i++){
      document.getElementById("UL"+i).style.visibility = "hidden";
    }
    document.getElementById("game").style.visibility = "visible";
  };
  function save(){
    document.cookie = "HSC="+HScount+";Funds="+totalFunds+";path=/";
  }
  function getCookie(cname) { //Cookie Code from W3
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
  }
  function load(){
    HScount = getCookie("HSC");
    totalFunds = getCookie("Funds");
  }
</script>
</head>
<body onLoad="StartTime()">
  <button onClick="initialise()" id="init">Initialise game</button>
  <div id="game">
  <table>
  <tr><td colspan=4 width=100%><h1>Hotstoppers: <span id="HScreated">0</span></h1></td></tr>
   
  <tr><td width=25%> <h2>Command Centre</h2><br>
  <button onClick="HSincome()">Order a shipment of hotstoppers</button><br>
  <button onClick="HSdelivery()">Deliver a shipment of hotstoppers</button><br>
  <button onClick="Employ('telephonist')" id="UL0" >Hire a Telephonist (to order more hotstoppers)</button><br>
  <button onClick="Employ('salesman')" id="UL1" >Hire a Salesman (to sell more hotstoppers)</button>
  <button onClick="HSreprice(true)">Raise your price</button><br>
  <button onClick="HSreprice(false)">Lower your price</button><br>
  </td>
    
  <td width=25%> <h2>Data Centre</h2><br>
  <p>Total Funds: $<span id="Funds">0</span></p>
  <p>Price per Hotstopper: $<span id="HSprice">0</span></p>
  <p>Hotstopper Demand:<span id="Demand">0</span>%</p>
  <p>Hotstoppers in stock:<span id="HSstock">0</span></p>
  </td>
  
  <td width=25% id="UL2"> <h2>Research Centre</h2><br>
  <p>Total Research Funds: $<span id="RFunds">0</span></p>
  </td>
  
  <td width=25% id="UL3"> <h2>Project Centre</h2><br>
    
  </td>
  </tr></table>
  </div>
  <button onClick="save()" id="init">SAVE</button> <button onClick="load()" id="init">LOAD</button>
</body>
  <script>document.getElementById("game").style.visibility = "hidden";</script>
</html>
