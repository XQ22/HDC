<!DOCTYPE html>
<html>
<head>
<title>Hotstopper Distribution Centre</title>
<link rel="shortcut icon" type="image/x-icom" href="flag.ico" />
<style>
body {
  background-color: #252630;
  color: #acaeb2;
}
  
h1, h2 {
  font-family: Arial, Helvetica Neue, monospace;
}

h1 {
  font-size: 70px;
}
p {
  font-family: Helvetica, Arial, monospace;
}
  
table {
  border: 0px;
}

button {
  border: none;
  -webkit-transition-duration: 0.5s;
  transition-duration: 0.5s;
}

button:hover {
  color: #ccced2;
}
 
</style>
<script>
  var timePlaying = 0;
  var timeEvent = true;
  var display = {};
  var research = {};
  var increments = [1,1,1];
  var employed = [0,0,0];
  var wages = [10,20,50];
  var totalFunds = 0;
  var marketEffectiveness = 100;
  var HScount = 0;
  var HSstock = 0;
  var HSingress = 1;
  var HSingressAuto = 0;
  var HSegress = 1;
  var HSegressAuto = 0;
  var HSdemand = 50;
  var HSprice = 50;
  var Rfunds = 0;
  var Research = [0,1,2];
  var ResearchFundingAuto = 0;
  function upupdowndownleftrightleftrightba(quantity,password){
    if(password === "swordfish"){
      HScount = quantity;
    } else {
      console.log("Cheating detected in recent Centre Audit. Centre will be shut down.");
      HScount = "Shut Down for illegal activity";
    }
  };
  function StartTime(){
    timePlaying++;
    if(HSstock>HSegressAuto){HSstock += HSingressAuto - HSegressAuto;}
    if(Math.floor(Math.random() * 101) > (100-HSdemand)&&HSstock>HSegress){
      HSstock -= HSegress;
      totalFunds += HSprice;
    }
    HScount += HSingressAuto;
    if(totalFunds > 100){
      document.getElementById("UL0").style.visibility = "visible";
      if(totalFunds > 1000){
        document.getElementById("UL1").style.visibility = "visible";
        if(totalFunds > 20000){
          document.getElementById("UL2").style.visibility = "visible";
          document.getElementById("UL3").style.visibility = "visible";
          document.getElementById("UL4").style.visibility = "visible";
        }
      }
    }
    HSdemand = marketEffectiveness/HSprice;
    var t = setTimeout(StartTime, 50);
    display.HSCount.innerHTML = HScount;
    display.Funds.innerHTML = Math.floor(totalFunds/100) + "." + totalFunds%100;
    display.Demand.innerHTML = Math.floor(HSdemand*10)/10;
    display.Price.innerHTML = HSprice;
    display.Stock.innerHTML = HSstock;
    display.ResearchFunds.innerHTML = Math.floor(Rfunds/100) + "." + Rfunds%100;
  };
  function HSincome(){
    HScount += HSingress;
    HSstock += HSingress;
  };
  function HSdelivery(){
    HSstock -= HSingress;
  };
  function HSreprice(up){
    if(up){
      HSprice++;
    } else {
      if(HSprice>1){HSprice--;}
    }
  }
  function Employ(type){
    switch(type){
      case "telephonist":
        if(totalFunds>10){
          HSingressAuto += increments[0];
          totalFunds -= wages[0];
          wages[0]++;
          employed[0]++;
        }
      break;
      case "salesman":
        if(totalFunds>20){
          HSegressAuto += increments[1];
          totalFunds -= wages[1];
          wages[1]++;
          employed[1]++;
        }
      break;
      case "researcher":
        if(totalFunds>20){
          ResearchFundingAuto += increments[2];
          totalFunds -= wages[2];
          wages[2]++;
          employed[2]++;
        }
      break;
    }
    for(var i=0;i<employed.length;i++){
      document.getElementById("Wage"+i).innerHTML = wages[i];
    }
  };
  function research(type,funds,affected,increase){
    if(Rfunds>funds){
      if(type==="Addition"){
        document.getElementById("UL"+affected).style.visibility = "visible";
      }
      if(type==="Enhancement"){
        increments[affected] *= increase;
      }
    }
  };
  function RnD(way,amount){
    if(way === "to"){
      Rfunds += amount;
      totalFunds -= amount;
    }
    if(way === "fro"){
      Rfunds -= amount;
      totalFunds += amount;
    }
  };
  function explain(cat,thing){
    var c = "";
    if(cat === "Employ"){
      c = "Currently employed:"+employed[thing];
    }
    display.Info.innerHTML = c;
  }
  function initialise(){
    display.HSCount = document.getElementById("HScreated");
    display.Info = document.getElementById("info");
    display.Funds = document.getElementById("Funds");
    display.Demand = document.getElementById("Demand");
    display.Price = document.getElementById("HSprice");
    display.Stock = document.getElementById("HSstock");
    display.ResearchFunds = document.getElementById("RFunds");
    document.getElementById("init").style.visibility = "hidden";
    for(var i = 0;i<7;i++){
      document.getElementById("UL"+i).style.visibility = "hidden";
      document.getElementById("RL"+(i+3)).style.visibility = "hidden";
    }
    document.getElementById("game").style.visibility = "visible";
  };
  function save(){
    document.cookie = "HSC="+HScount+";HSS="+HSstock+";HSP="+HSprice+";E0="+employed[0]+";E1="+employed[1]+";E2="+employed[2]+";R0="+Research[0]+";R1="+Research[1]+";R2="+Research[2]+";Funds="+totalFunds+";RFunds="+Rfunds+";path=/";
  };
  function getCookie(cname) { //Cookie Code from W3
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
  };
  function load(){
    HScount = Number(getCookie("HSC"));
    HSstock = Number(getCookie("HSS"));
    HSprice = Number(getCookie("HSP"));
    for(var i = 0;i<employed.length;i++){
      employed[i] = Number(getCookie("E"+i));
      wages[i] = wages[i] + employed[i];
    } 
    for(var i = 0;i<Research.length;i++){
      Research[i] = Number(getCookie("E"+i));
      wages[i] = wages[i] + employed[i];
    }
    totalFunds = Number(getCookie("Funds"));
    Rfunds = Number(getCookie("RFunds"));
  };
</script>
</head>
<body onLoad="StartTime()">
  <button onClick="initialise()" id="init">Initialise game</button>
  <div id="game">
  <table>
  <tr><td colspan=4 width=100%><h1>Hotstoppers: <span id="HScreated">0</span></h1></td></tr>
   
  <tr><td width=25%> <h2>Command Centre</h2><br>
  <button onClick="HSincome()">Order a shipment of hotstoppers</button><br>
  <button onClick="HSdelivery()">Deliver a shipment of hotstoppers</button><br>
  <button onClick="Employ('telephonist')" id="UL0" onmouseover="explain('Employ',0)" >Hire a Telephonist (to order more hotstoppers)  [$<span id="Wage0">10</span>]</button><br>
  <button onClick="Employ('salesman')" id="UL1" onmouseover="explain('Employ',1)" >Hire a Salesman (to sell more hotstoppers) [$<span id="Wage1">20</span>]</button><br>
  <button onClick="RnD('to',100)" id="UL3" >Fund a little research [$1]</button><br> 
  <button onClick="RnD('fro',100)" id="UL4" >Un-fund a little research</button><br>
  <button onClick="Employ('researcher')" id="UL6" onmouseover="explain('Employ',2)" >Hire a researcher [$<span id="Wage2">50</span>]</button><br>
  <button onClick="HSreprice(true)">Raise your price</button><br>
  <button onClick="HSreprice(false)">Lower your price</button><br>
  </td>
    
  <td width=25%> <h2>Data Centre</h2><br>
  <p>Total Funds: $<span id="Funds">0</span></p>
  <p>Price per Hotstopper: $<span id="HSprice">0</span></p>
  <p>Hotstopper Demand:<span id="Demand">0</span>%</p>
  <p>Hotstoppers in stock:<span id="HSstock">0</span></p>
  </td>
  
  <td width=25% id="UL2"> <h2>Research Centre</h2><br>
  <p>Total Research Funds: $<span id="RFunds">0</span></p>
  <button onClick="Research("Addition",2000,6,0)" id="RL0" >R&amp;D Auto-Funding</button><br>
  <button onClick="Research("Enhancement",2000,0,2)" id="RL1">Doubly-efficient telephonists</button><br>
  <button onClick="Research("Enhancement",2000,1,2)" id="RL2">Doubly-efficient salesmen</button><br>
  <button onClick="Research("Addition",20000,6,0)" id="RL3" >Dummy</button><br>
  <button onClick="Research("Enhancement",20000,0,2)" id="RL4">Dummy</button><br>
  <button onClick="Research("Addition",20000,6,0)" id="RL5" >Dummy</button><br>
  <button onClick="Research("Enhancement",20000,0,2)" id="RL6">Dummy</button><br>
  <button onClick="Research("Addition",20000,6,0)" id="RL7" >Dummy</button><br>
  <button onClick="Research("Enhancement",20000,0,2)" id="RL8">Dummy</button><br>
  <button onClick="Research("Addition",20000,6,0)" id="RL9" >Dummy</button><br>
  <button onClick="Research("Enhancement",20000,0,2)" id="RL10">Dummy</button><br>
  </td>
  
  <td width=25% id="UL5"> <h2>Podcast Centre</h2><br>
    
  </td>
  </tr></table>
  </div>
  <br><br><hr>
  <h2>Saving (unreliable):</h2><button onClick="save()" id="init">SAVE</button> <button onClick="load()" id="init">LOAD</button><br>
  <h2>Information:</h2><p id="info"></p>
</body>
  <script>document.getElementById("game").style.visibility = "hidden";</script>
</html>
